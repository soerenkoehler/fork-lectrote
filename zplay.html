<!DOCTYPE html>
<html>
<head>
<title>Lectrote</title>

<link rel="stylesheet" href="./fonts.css" type="text/css">
<link rel="stylesheet" href="./el-glkote.css" type="text/css">
<link rel="stylesheet" href="./ifvms/zvm.css" type="text/css">
<link id="bodycss" rel="stylesheet" href="./play.css" type="text/css">

<script type="text/javascript">
game_options = {
  spacing: 4,
  outspacingx: 0,
  outspacingy: 16,
  use_query_story: false,
  set_page_title: true,
  font_load_delay: true,
  do_vm_autosave: true
};

window.$ = window.jQuery = require('./quixe/lib/jquery-1.12.4.min.js');
if (!game_options.use_unminified_js) {
  var elkote_mods = require('./quixe/lib/elkote.min.js');
  window.GlkOteClass = elkote_mods.GlkOteClass;
  window.BlorbClass = elkote_mods.BlorbClass;
  window.Dialog = elkote_mods.Dialog;
  window.Glk = elkote_mods.Glk;
  require('./ifvms/zvm_dispatch.min.js');
  var ZVM = require('./ifvms/zvm.min.js');
  //TODO: We are currently using the GiLoad from Quixe, rather than the one bundled with ifvms. When ifvms is updated, change this back.
  window.GiLoad = require('./quixe/lib/quixe.min.js').GiLoad;
  // window.GiLoad = require('./ifvms/gi_load.min.js').GiLoad;
}
else {
  window.GlkOteClass = require('./quixe/src/glkote/glkote.js').GlkOteClass;
  window.BlorbClass = require('./quixe/src/glkote/gi_blorb.js').BlorbClass;
  window.Dialog = require('./quixe/src/glkote/electrofs.js').Dialog;
  window.Glk = require('./quixe/src/glkote/glkapi.js').Glk;
  var ZVM = require('./ifvms/zvm.min.js');
  require('./ifvms/zvm_dispatch.js');
  window.GiLoad = require('./quixe/src/quixe/gi_load.js').GiLoad;
}

game_options.Dialog = window.Dialog; // loaded from electrofs.js
game_options.GiDispa = window.GiDispa; // loaded from zvm_dispatch.js
// TODO: Update the GiDispa.set_vm() call in zvm_dispatch.js to the newer GiDispa.init() format. Until then, we patch in an adapter.
window.GiDispa.init = function(opts) { window.GiDispa.set_vm(opts.vm); };

require('./apphooks.js');

</script>


</head>
<body>

<div id="content">
<div id="gameport">
<div id="windowport">
<noscript><hr>
<p>You'll need to turn on Javascript in your web browser to play this game.</p>
<hr></noscript>
</div>
<div id="loadingpane">
<img src="quixe/media/waiting.gif" alt="LOADING"><br>
<em>&nbsp;&nbsp;&nbsp;Loading...</em>
</div>
<div id="errorpane" style="display:none;"><div id="errorcontent">...</div></div>
</div>
<div id="searchbar" class="CanHaveInputFocus">SHADOW</div>
</div>

</body>
</html>
